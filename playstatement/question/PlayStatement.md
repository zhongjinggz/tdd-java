# 演出结算问题

## 业务场景

* 有一个话剧团，会到客户（customer）现场演出
* 剧团根据观众（audience）人数以及剧目（play）类型向客户收费
* 目前有两种剧目类型：悲剧（tragedy）和戏剧（comedy）
* 结算时，还会根据观众数量给出积分（volume credit），以便下一次为客户提供优惠。

## 任务
题目给出了一个已经完成的程序，用于根据演出情况（performance summary）计算结算单（pay statement），存入数据库，并将其返回给客户。请在自动化单元或集成测试的保障下，完成以下任务：

* 按照目前的逻辑，对于喜剧（comedy），超过20人时要加收额外费用；请改为超过10人时加收，其他逻辑不变
* 为程序添加层次结构，建议按照DDD分层架构分为：presentation, application, domain
* 用策略模式重构结算金额和积分的逻辑	
		
## 作业 

* 为程序添加全面的集成和单元测试
* 找出其他需重构的部分，在自动化测试的保障下进行重构


## 学习目的：
* 遗留系统自动化单元与集成测试导入的问题与策略
* 不同场景下运用单元与集成测试的方法
    * 单元测试与局部修改
    * 冒烟测试与安全重构
    * 重点模块的全面测试与重构
* 后补自动化测试的测试案例设计方法


		
	

